#version 300 es
uniform highp sampler2D lines;uniform highp vec2 playerPosition;void main(){uint _=uint(gl_VertexID);vec4 a=texelFetch(lines,ivec2(int(_/9u),0),0);uint b;switch(_ % 9u){case 0u:case 8u:{b=0u;break;}case 1u:{b=1u;break;}case 2u:case 3u:case 6u:{b=2u;break;}case 4u:{b=3u;break;}default:{b=4u;break;}}vec2 c=a.xy;vec2 d=a.zw;vec2 e;do{if(b==0u){e=c;break;}if(b==1u){e=d;break;}vec2 f=d-playerPosition;float g=f.x;float h=f.y;vec2 i=d+(f*max(0.,max((((g>=0.)?1.:(-1.))-a.z)/g,(((h>=0.)?1.:(-1.))-a.w)/h)));if(b==2u){e=i;break;}vec2 j=c-playerPosition;float k=j.x;float l=j.y;vec2 m=c+(j*max(0.,max((((k>=0.)?1.:(-1.))-a.x)/k,(((l>=0.)?1.:(-1.))-a.y)/l)));if(b==4u){e=m;break;}vec2 n=(j*length(f))+(f*length(j));vec2 o=vec2(m.x,i.y);vec2 p=vec2(i.x,m.y);bvec2 q=bvec2(dot(n,o-playerPosition)<=0.);vec2 r=vec2(q.x?vec2(0.).x:o.x,q.y?vec2(0.).y:o.y);bvec2 s=bvec2(dot(n,p-playerPosition)<=0.);vec2 t=vec2(s.x?vec2(0.).x:p.x,s.y?vec2(0.).y:p.y);bvec2 u=bvec2(abs(r.x)>abs(t.x));vec2 v=vec2(u.x?r.x:t.x,u.y?r.y:t.y);bvec2 w=bvec2(abs(r.y)>abs(t.y));vec2 x=vec2(w.x?r.x:t.x,w.y?r.y:t.y);bvec2 y=bvec2(abs(v.x)>abs(x.y));e=vec2(y.x?v.x:x.x,y.y?v.y:x.y);break;}while(false);gl_Position=vec4(e,0.,1.);}
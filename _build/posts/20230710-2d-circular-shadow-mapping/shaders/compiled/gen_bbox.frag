#version 300 es
precision highp float;precision highp int;uniform highp usampler2D lightingData;uniform highp sampler2D lightPlaneMap;layout(location=0)out highp vec4 outBBox;vec3 _;void main(){int a=int(gl_FragCoord.x);highp vec2 b=uintBitsToFloat(texelFetch(lightingData,ivec2(a,0),0).xy);ivec2 c=textureSize(lightPlaneMap,0);int d=c.x;highp float e=uintBitsToFloat(2130706432u-floatBitsToUint(float(d)))*6.2831855;highp vec2 f;highp vec2 g;g=vec2(-65504.);f=vec2(65504.);highp vec2 h;highp vec2 i;for(int j=0;j<d;g=i,f=h,j++){highp vec2 k;highp vec4 l=texelFetch(lightPlaneMap,ivec2(j,a),0);highp vec2 m=(l.xy*2.)-vec2(1.);highp vec3 n=_;n.x=m.x;highp vec3 o=n;o.y=m.y;highp float p=float(j);highp float q=(p-1.)*e;highp float r=(p+1.)*e;highp vec2 s;do{highp vec2 t=vec2(cos(q),sin(q));k=o.xy;highp float u=dot(k,t);if(abs(u)<=.017452406){s=vec2(0.);break;}s=t*(l.z/u);break;}while(false);highp vec2 v;do{highp vec2 w=vec2(cos(r),sin(r));highp float x=dot(k,w);if(abs(x)<=.017452406){v=vec2(0.);break;}v=w*(l.z/x);break;}while(false);h=min(min(s,v),f);i=max(max(s,v),g);}outBBox=vec4(f+b,g+b);}
#version 300 es
precision highp float;precision highp int;uniform highp vec4 v1HybridParams;uniform highp usampler2D v1DfTexture;uniform highp sampler2D v1LinesBuffer;uniform highp vec2 targetUV;in highp vec2 uv;layout(location=0)out highp vec4 col;void main(){highp vec2 _=uv-targetUV;highp float a=length(_);highp vec2 b=_/vec2(a);bool c=min(targetUV.x,targetUV.y)<=0.;bool d;if(!c){d=max(targetUV.x,targetUV.y)>=1.;}else{d=c;}highp float e;highp vec2 f;if(d){highp vec2 g=vec2(1.)/b;highp vec2 h=(vec2(0.,1.)-targetUV.xx)*g.x;highp vec2 i=(vec2(0.,1.)-targetUV.yy)*g.y;highp vec2 j;if(h.x>h.y){j=h.yx;}else{j=h;}highp vec2 k;if(i.x>i.y){k=i.yx;}else{k=i;}highp float l=max(0.,max(j.x,k.x));bool m=l<min(j.y,k.y);bool n;if(m){n=(l*l)<(a*a);}else{n=m;}highp float o;highp vec2 p;if(n){highp float q=l+10.e-06;p=targetUV+(b*q);o=q;}else{p=targetUV;o=0.;}f=p;e=o;}else{f=targetUV;e=0.;}highp vec2 r;highp vec2 s;r=f;s=b*a;uint t;highp vec2 u;uint v;bool w;highp float x;highp vec2 y;uint z;bool A=false;uint B=0u;highp float C=e;uint D=0u;for(;;){if(!A){highp vec2 E;E=r;t=B;highp float F;uint G;highp vec2 H;uint I;uint J;uint K;uint L;highp float M=C;uint N=D;uint O=0u;uint P=0u;for(;;){if(t<128u){bool Q=M>=a;bool R;if(!Q){R=min(E.x,E.y)<0.;}else{R=Q;}bool S;if(!R){S=max(E.x,E.y)>1.;}else{S=R;}if(S){z=N;y=E;x=M;K=P;J=O;break;}uvec4 T=texelFetch(v1DfTexture,ivec2(E*v1HybridParams.xx),0);uint U=T.x;highp float V=float(U&255u)*.003921569;F=M+V;uint W=(U>>8u)&255u;G=U>>16u;H=E+(b*V);if(W>0u){uint X=U>>8u;bool Y=N==X;L=Y?N:X;I=Y?0u:W;}else{L=N;I=W;}if(I>0u){z=L;y=H;x=F;K=G;J=I;break;}N=L;E=H;M=F;t++;P=G;O=I;continue;}else{z=N;y=E;x=M;K=P;J=O;break;}}if(J==0u){v=t;break;}uint Z=K+J;u=s;w=A;bool a_;highp vec2 b_;for(uint c_=K;c_<Z;u=b_,c_++,w=a_){highp vec4 d_=texelFetch(v1LinesBuffer,ivec2(int(c_),0),0);highp vec2 e_=-u;highp vec2 f_=targetUV-d_.xy;highp float g_=e_.x;highp float h_=d_.w;highp float i_=e_.y;highp float j_=d_.z;highp float k_=(g_*h_)-(i_*j_);highp float l_=f_.x;highp float m_=f_.y;uint n_=floatBitsToUint(k_)&2147483648u;highp float o_=uintBitsToFloat(floatBitsToUint((l_*i_)-(m_*g_))^n_);highp float p_=uintBitsToFloat(floatBitsToUint((l_*h_)-(m_*j_))^n_);bool q_=min(o_,p_)>0.;bool r_;if(q_){r_=max(o_,p_)<abs(k_);}else{r_=q_;}if(r_){b_=u*(p_/abs(k_));}else{b_=u;}a_=r_?true:w;}D=z;r=y;C=x;B=t;A=w;s=u;continue;}else{v=B;break;}}highp float s_=float(v)*.0625;col=vec4(s_,s_,s_,1.);}
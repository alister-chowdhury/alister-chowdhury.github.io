struct c{d:u32,e:u32,f:vec4f,h:u32,}struct i{d:array<vec4f>,}struct j{d:u32,}@group(0)@binding(1)var<storage,read_write>k:i;var<workgroup>l:array<c,16>;var<workgroup>m:array<c,4>;var<private>n:vec3u;@group(0)@binding(2)var<uniform>o:j;@group(0)@binding(0)var<storage>p:i;var<workgroup>q:array<u32,16>;fn function(){var s:u32;var t:u32;var u:vec4f;var v:u32;var A:u32;var B:bool;var C:u32;var D:u32;var E:vec4f;var F:u32;var G:u32;var H:u32;var I:u32;var J:u32;var K:u32;var L:vec4f;var M:u32;var N:u32;var O:u32;var P:u32;var Q:bool;var R:u32;var S:u32;var T:vec4f;var U:u32;var V:u32;var W:vec4f;var X:u32;var Y:u32;var Z:u32;var a_:vec4f;var b_:u32;var c_:u32;var d_:u32;var e_:vec4f;var f_:u32;var g_:u32;var h_:u32;var i_:vec4f;var j_:u32;var k_:u32;var l_:u32;var m_:vec4f;var n_:u32;var o_:u32;var p_:u32;var q_:vec4f;var r_:u32;var s_:u32;var t_:u32;var u_:vec4f;var v_:u32;var w_:u32;var x_:vec4f;var y_:u32;var z_:u32;var A_:vec4f;var B_:u32;var C_:u32;var D_:u32;var E_:vec4f;var F_:u32;var G_:u32;var H_:u32;var I_:vec4f;var J_:u32;var K_:u32;var L_:u32;var M_:vec4f;var N_:u32;var O_:u32;var P_:u32;var Q_:vec4f;var R_:u32;var S_:u32;var T_:u32;var U_:u32;let V_=n;let W_=V_.xy;let X_=(V_.x|(V_.y<<bitcast<u32>(16)));let Y_=((X_|(X_<<bitcast<u32>(4)))&252645135u);let Z_=((Y_|(Y_<<bitcast<u32>(2)))&858993459u);let _a=((Z_|(Z_<<bitcast<u32>(1)))&1431655765u);let ca=((_a|(_a>>bitcast<u32>(15)))&65535u);let da=vec2f(W_);let ea=vec2f((W_+vec2u(1u,1u)));let fa=(vec4f(da.x,da.y,ea.x,ea.y)*vec4f(.25,.25,.25,.25));s=0u;t=0u;u=vec4f(1.,1.,-1.,-1.);v=0u;A=0u;loop{let ha=s;let ia=t;let ja=u;let ka=v;let la=A;let ma=o.d;G=ka;J=ka;L=ja;M=ka;U_=ia;P=ha;if(la<ma){let na=p.d[la];let oa=na.xy;let pa=na.zw;let qa=((oa+pa)*.5);let sa=all((qa>=fa.xy));B=sa;if sa{B=all((qa<fa.zw));}let ta=B;C=ha;D=ia;E=ja;F=ka;if ta{let ua=min(oa,pa);let va=max(oa,pa);let Aa=vec4f(ua.x,ua.y,va.x,va.y);let Ba=min(ja.xy,Aa.xy);let Ca=max(ja.zw,Aa.zw);C=(la+1u);D=select(ia,la,(ka==0u));E=vec4f(Ba.x,Ba.y,Ca.x,Ca.y);F=(ka+bitcast<u32>(1));}let Da=C;let Ea=D;let Fa=E;let Ga=F;O_=Da;P_=Ea;Q_=Fa;R_=Ga;continue;}else{break;}continuing{let Ha=O_;s=Ha;let Ia=P_;t=Ia;let Ja=Q_;u=Ja;let Ka=R_;v=Ka;A=(la+bitcast<u32>(1));}}let La=G;q[ca]=La;workgroupBarrier();H=45u;I=0u;loop{let Ma=H;let Na=I;K=Ma;S_=Ma;if(Na<ca){continue;}else{break;}continuing{let Oa=q[Na];H=(Ma+Oa);I=(Na+bitcast<u32>(1));}}let Pa=J;let Qa=K;let Ra=L;let Sa=M;l[((V_.y*4u)+V_.x)]=c((1u|(Pa<<bitcast<u32>(1))),Qa,Ra,Sa);workgroupBarrier();let Ta=S_;N=Ta;let Ua=U_;O=Ua;loop{let Va=N;let Wa=O;let Xa=P;if(Wa<Xa){let Ya=p.d[Wa];let Za=Ya.xy;let _b=Ya.zw;let cb=((Za+_b)*.5);let db=all((cb>=fa.xy));Q=db;if db{Q=all((cb<fa.zw));}let eb=Q;R=Va;if eb{let fb=(Za-_b);k.d[Va]=vec4f(Ya.x,Ya.y,fb.x,fb.y);R=(Va+bitcast<u32>(1));}let hb=R;T_=hb;continue;}else{break;}continuing{let ib=T_;N=ib;O=(Wa+bitcast<u32>(1));}}o_=u32();p_=u32();q_=vec4f();r_=u32();s_=u32();t_=u32();u_=vec4f();v_=u32();if all((W_<vec2u(2u,2u))){let jb=(W_*vec2u(2u,2u));let kb=(jb+vec2u(1u,0u));let lb=(jb+vec2u(0u,1u));let mb=(jb+vec2u(1u,1u));let nb=l[((jb.y*4u)+jb.x)];let ob=l[((kb.y*4u)+kb.x)];let pb=l[((lb.y*4u)+lb.x)];let qb=l[((mb.y*4u)+mb.x)];let sb=(9u*ca);let tb=(9u+sb);let ub=(((nb.h+ob.h)+pb.h)+qb.h);let vb=((ub<=16u)&&all(((vec4u(nb.d,ob.d,pb.d,qb.d)&vec4u(1u,1u,1u,1u))==vec4u(1u,1u,1u,1u))));S=u32();T=vec4f();if vb{let Ab=min(nb.f.xy,ob.f.xy);let Bb=max(nb.f.zw,ob.f.zw);let Cb=vec4f(Ab.x,Ab.y,Bb.x,Bb.y);let Db=min(pb.f.xy,qb.f.xy);let Eb=max(pb.f.zw,qb.f.zw);let Fb=vec4f(Db.x,Db.y,Eb.x,Eb.y);let Gb=min(Cb.xy,Fb.xy);let Hb=max(Cb.zw,Fb.zw);S=(1u|(ub<<bitcast<u32>(1)));T=vec4f(Gb.x,Gb.y,Hb.x,Hb.y);}let Ib=S;let Jb=T;let Kb=select(u32(),0u,vb);c_=select(u32(),1u,vb);d_=Kb;e_=select(vec4f(),vec4f(1.,1.,-1.,-1.),vec4(vb));f_=Kb;g_=Ib;h_=select(u32(),nb.e,vb);i_=Jb;j_=select(u32(),ub,vb);if!(select(false,true,vb)){let Lb=nb.f.xy;let Mb=ob.f.xy;let Nb=min(Lb,Mb);let Ob=nb.f.zw;let Pb=ob.f.zw;let Qb=max(Ob,Pb);let Rb=vec4f(Nb.x,Nb.y,Qb.x,Qb.y);let Sb=(Rb.zw-Rb.xy);let Tb=pb.f.xy;let Ub=min(Lb,Tb);let Vb=pb.f.zw;let Wb=max(Ob,Vb);let Xb=vec4f(Ub.x,Ub.y,Wb.x,Wb.y);let Yb=(Xb.zw-Xb.xy);let Zb=qb.f.xy;let _c=min(Tb,Zb);let ac=qb.f.zw;let bc=max(Vb,ac);let cc=vec4f(_c.x,_c.y,bc.x,bc.y);let dc=(cc.zw-cc.xy);let ec=min(Mb,Zb);let fc=max(Pb,ac);let gc=vec4f(ec.x,ec.y,fc.x,fc.y);let hc=(gc.zw-gc.xy);let ic=((max(0.,(Sb.x*Sb.y))+max(0.,(dc.x*dc.y)))>(max(0.,(Yb.x*Yb.y))+max(0.,(hc.x*hc.y))));let jc=select(pb.d,ob.d,ic);let kc=select(pb.e,ob.e,ic);let lc=vec4(ic);let mc=select(pb.f,ob.f,lc);let nc=select(pb.h,ob.h,ic);let oc=select(ob.d,pb.d,ic);let pc=select(ob.e,pb.e,ic);let qc=select(ob.f,pb.f,lc);let rc=select(ob.h,pb.h,ic);let sc=(sb+12u);switch bitcast<i32>(0u){default:{k.d[sc]=bitcast<vec4f>(vec4u(nb.d,nb.e,oc,pc));let tc=(nb.h==0u);k.d[(sb+13u)]=select(nb.f,vec4f(0.,0.,0.,0.),vec4(tc));let uc=(rc==0u);k.d[(sb+14u)]=select(qc,vec4f(0.,0.,0.,0.),vec4(uc));if uc{U=nb.d;V=nb.e;W=nb.f;X=nb.h;break;}else{if tc{U=oc;V=pc;W=qc;X=rc;break;}}let vc=min(Lb,qc.xy);let wc=max(Ob,qc.zw);U=0u;V=sc;W=vec4f(vc.x,vc.y,wc.x,wc.y);X=(nb.h+rc);break;}}let xc=U;let yc=V;let zc=W;let Ac=X;let Bc=(sb+15u);switch bitcast<i32>(0u){default:{k.d[Bc]=bitcast<vec4f>(vec4u(jc,kc,qb.d,qb.e));let Cc=(nc==0u);k.d[(sb+16u)]=select(mc,vec4f(0.,0.,0.,0.),vec4(Cc));let Dc=(qb.h==0u);k.d[(sb+17u)]=select(qb.f,vec4f(0.,0.,0.,0.),vec4(Dc));if Dc{Y=jc;Z=kc;a_=mc;b_=nc;break;}else{if Cc{Y=qb.d;Z=qb.e;a_=qb.f;b_=qb.h;break;}}let Ec=min(mc.xy,Zb);let Fc=max(mc.zw,ac);Y=0u;Z=Bc;a_=vec4f(Ec.x,Ec.y,Fc.x,Fc.y);b_=(nc+qb.h);break;}}let Gc=Y;let Hc=Z;let Ic=a_;let Jc=b_;c_=Gc;d_=Hc;e_=Ic;f_=Jc;g_=xc;h_=yc;i_=zc;j_=Ac;}let Kc=c_;let Lc=d_;let Mc=e_;let Nc=f_;let Oc=g_;let Pc=h_;let Qc=i_;let Rc=j_;switch bitcast<i32>(0u){default:{k.d[tb]=bitcast<vec4f>(vec4u(Oc,Pc,Kc,Lc));let Sc=(Rc==0u);k.d[(sb+10u)]=select(Qc,vec4f(0.,0.,0.,0.),vec4(Sc));let Tc=(Nc==0u);k.d[(sb+11u)]=select(Mc,vec4f(0.,0.,0.,0.),vec4(Tc));if Tc{k_=Oc;l_=Pc;m_=Qc;n_=Rc;break;}else{if Sc{k_=Kc;l_=Lc;m_=Mc;n_=Nc;break;}}let Uc=min(Qc.xy,Mc.xy);let Vc=max(Qc.zw,Mc.zw);k_=0u;l_=tb;m_=vec4f(Uc.x,Uc.y,Vc.x,Vc.y);n_=(Rc+Nc);break;}}let Wc=k_;let Xc=l_;let Yc=m_;let Zc=n_;m[((V_.y*2u)+V_.x)]=c(Wc,Xc,Yc,Zc);o_=Kc;p_=Lc;q_=Mc;r_=Nc;s_=Oc;t_=Pc;u_=Qc;v_=Rc;}let _d=o_;let ad=p_;let bd=q_;let cd=r_;let dd=s_;let ed=t_;let fd=u_;workgroupBarrier();let gd=v_;if all((W_<vec2u(1u,1u))){let hd=(W_*vec2u(2u,2u));let jd=(hd+vec2u(1u,0u));let kd=(hd+vec2u(0u,1u));let ld=(hd+vec2u(1u,1u));let md=m[((hd.y*2u)+hd.x)];let nd=m[((jd.y*2u)+jd.x)];let od=m[((kd.y*2u)+kd.x)];let pd=m[((ld.y*2u)+ld.x)];let qd=(9u*ca);let rd=(((md.h+nd.h)+od.h)+pd.h);let sd=((rd<=16u)&&all(((vec4u(md.d,nd.d,od.d,pd.d)&vec4u(1u,1u,1u,1u))==vec4u(1u,1u,1u,1u))));w_=dd;x_=fd;if sd{let td=min(md.f.xy,nd.f.xy);let ud=max(md.f.zw,nd.f.zw);let vd=vec4f(td.x,td.y,ud.x,ud.y);let wd=min(od.f.xy,pd.f.xy);let xd=max(od.f.zw,pd.f.zw);let yd=vec4f(wd.x,wd.y,xd.x,xd.y);let zd=min(vd.xy,yd.xy);let Ad=max(vd.zw,yd.zw);w_=(1u|(rd<<bitcast<u32>(1)));x_=vec4f(zd.x,zd.y,Ad.x,Ad.y);}let Bd=w_;let Cd=x_;G_=select(_d,1u,sd);H_=select(ad,0u,sd);I_=select(bd,vec4f(1.,1.,-1.,-1.),vec4(sd));J_=select(cd,0u,sd);K_=Bd;L_=select(ed,md.e,sd);M_=Cd;N_=select(gd,rd,sd);if!(select(false,true,sd)){let Dd=md.f.xy;let Ed=nd.f.xy;let Fd=min(Dd,Ed);let Gd=md.f.zw;let Hd=nd.f.zw;let Id=max(Gd,Hd);let Jd=vec4f(Fd.x,Fd.y,Id.x,Id.y);let Kd=(Jd.zw-Jd.xy);let Ld=od.f.xy;let Md=min(Dd,Ld);let Nd=od.f.zw;let Od=max(Gd,Nd);let Pd=vec4f(Md.x,Md.y,Od.x,Od.y);let Qd=(Pd.zw-Pd.xy);let Rd=pd.f.xy;let Sd=min(Ld,Rd);let Td=pd.f.zw;let Ud=max(Nd,Td);let Vd=vec4f(Sd.x,Sd.y,Ud.x,Ud.y);let Wd=(Vd.zw-Vd.xy);let Xd=min(Ed,Rd);let Yd=max(Hd,Td);let Zd=vec4f(Xd.x,Xd.y,Yd.x,Yd.y);let _e=(Zd.zw-Zd.xy);let ae=((max(0.,(Kd.x*Kd.y))+max(0.,(Wd.x*Wd.y)))>(max(0.,(Qd.x*Qd.y))+max(0.,(_e.x*_e.y))));let be=select(od.d,nd.d,ae);let ce=select(od.e,nd.e,ae);let de=vec4(ae);let ee=select(od.f,nd.f,de);let fe=select(od.h,nd.h,ae);let ge=select(nd.d,od.d,ae);let he=select(nd.e,od.e,ae);let ie=select(nd.f,od.f,de);let je=select(nd.h,od.h,ae);let ke=(qd+3u);switch bitcast<i32>(0u){default:{k.d[ke]=bitcast<vec4f>(vec4u(md.d,md.e,ge,he));let le=(md.h==0u);k.d[(qd+4u)]=select(md.f,vec4f(0.,0.,0.,0.),vec4(le));let me=(je==0u);k.d[(qd+5u)]=select(ie,vec4f(0.,0.,0.,0.),vec4(me));if me{y_=md.d;z_=md.e;A_=md.f;B_=md.h;break;}else{if le{y_=ge;z_=he;A_=ie;B_=je;break;}}let ne=min(Dd,ie.xy);let oe=max(Gd,ie.zw);y_=0u;z_=ke;A_=vec4f(ne.x,ne.y,oe.x,oe.y);B_=(md.h+je);break;}}let pe=y_;let qe=z_;let re=A_;let se=B_;let te=(qd+6u);switch bitcast<i32>(0u){default:{k.d[te]=bitcast<vec4f>(vec4u(be,ce,pd.d,pd.e));let ue=(fe==0u);k.d[(qd+7u)]=select(ee,vec4f(0.,0.,0.,0.),vec4(ue));let ve=(pd.h==0u);k.d[(qd+8u)]=select(pd.f,vec4f(0.,0.,0.,0.),vec4(ve));if ve{C_=be;D_=ce;E_=ee;F_=fe;break;}else{if ue{C_=pd.d;D_=pd.e;E_=pd.f;F_=pd.h;break;}}let we=min(ee.xy,Rd);let xe=max(ee.zw,Td);C_=0u;D_=te;E_=vec4f(we.x,we.y,xe.x,xe.y);F_=(fe+pd.h);break;}}let ye=C_;let ze=D_;let Ae=E_;let Be=F_;G_=ye;H_=ze;I_=Ae;J_=Be;K_=pe;L_=qe;M_=re;N_=se;}let Ce=G_;let De=H_;let Ee=I_;let Fe=J_;let Ge=K_;let He=L_;let Ie=M_;let Je=N_;switch bitcast<i32>(0u){default:{k.d[qd]=bitcast<vec4f>(vec4u(Ge,He,Ce,De));let Ke=(Je==0u);k.d[(qd+1u)]=select(Ie,vec4f(0.,0.,0.,0.),vec4(Ke));let Le=(Fe==0u);k.d[(qd+2u)]=select(Ee,vec4f(0.,0.,0.,0.),vec4(Le));if Le{break;}else{if Ke{break;}}break;}}}return;}@compute @workgroup_size(4,4,1)fn main(@builtin(local_invocation_id)Me:vec3u){n=Me;function();}